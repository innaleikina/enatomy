{"ast":null,"code":"import _classCallCheck from \"/Users/bradleyjones/Desktop/code/eNatomy/enatomy-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bradleyjones/Desktop/code/eNatomy/enatomy-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/bradleyjones/Desktop/code/eNatomy/enatomy-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bradleyjones/Desktop/code/eNatomy/enatomy-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/bradleyjones/Desktop/code/eNatomy/enatomy-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/bradleyjones/Desktop/code/eNatomy/enatomy-app/client/src/pages/OneSet/OneSet.js\";\nimport React, { Component } from 'react';\nimport './oneset.css';\nimport CoverPhoto from '../../components/CoverPhoto';\nimport API from \"../../utils/API\"; // import LogInSignUp from \"../../components/LogInSignUp\"\n\nvar OneSet =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OneSet, _Component);\n\n  function OneSet() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, OneSet);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(OneSet)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      price: 10 + \"$\",\n      user: \"\",\n      cart: [],\n      purchased: []\n    };\n\n    _this.getUser = function () {\n      API.fetchUser().then(function (res) {\n        return _this.setState({\n          user: res.data,\n          cart: res.data.cart,\n          purchased: res.data.purchased\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.downloadSet = function () {\n      // console.log(\"download set clicked\");\n      API.downloadSet(_this.props.match.params.id.slice(0, -3)) // .then(res=> console.log(res.data))\n      .then(function (res) {\n        return window.location.href = res.data;\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.checkIfPurchased = function () {\n      if (_this.state.user === \"\") {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, \" you must be signed in to purchase \");\n      } else {\n        if (_this.state.purchased.includes(_this.props.match.params.id)) {\n          return React.createElement(\"button\", {\n            onClick: _this.downloadSet,\n            className: \"cart-btn\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 46\n            },\n            __self: this\n          }, \" download this set\");\n        } else {\n          return React.createElement(\"button\", {\n            onClick: _this.addToCart,\n            className: \"cart-btn\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49\n            },\n            __self: this\n          }, \" add to cart \");\n        }\n      }\n    };\n\n    _this.addToCart = function () {\n      if (_this.state.cart.length === 0) {\n        API.addToCart(_this.state.user._id, _this.props.match.params.id).catch(function (err) {\n          return console.log(err);\n        }); // console.log(\"the cart length is zero!\")\n      } else {\n        //console.log(\"cart is longer than zero!\");\n        if (_this.state.cart.includes(_this.props.match.params.id)) {\n          alert(\"item already in cart\");\n        } else {\n          API.addToCart(_this.state.user._id, _this.props.match.params.id).catch(function (err) {\n            return console.log(err);\n          }); // console.log(\"item is not in the cart\");\n        }\n      }\n\n      API.getUserCart(_this.state.user._id).then(function (res) {\n        return _this.setState({\n          cart: res.data.cart\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(OneSet, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getUser();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //  console.log(\"right before render \" + this.state.user.cart)\n      var jpgName = this.props.match.params.id;\n      var modelName = jpgName.substring(0, jpgName.length - 4);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        id: \"model-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, modelName), React.createElement(CoverPhoto, {\n        fileName: this.props.match.params.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \" \"), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, this.state.price), this.checkIfPurchased());\n    }\n  }]);\n\n  return OneSet;\n}(Component);\n\n;\nexport default OneSet;","map":{"version":3,"sources":["/Users/bradleyjones/Desktop/code/eNatomy/enatomy-app/client/src/pages/OneSet/OneSet.js"],"names":["React","Component","CoverPhoto","API","OneSet","state","price","user","cart","purchased","getUser","fetchUser","then","res","setState","data","catch","err","console","log","downloadSet","props","match","params","id","slice","window","location","href","checkIfPurchased","includes","addToCart","length","_id","alert","getUserCart","jpgName","modelName","substring"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './oneset.css';\nimport CoverPhoto from '../../components/CoverPhoto'\nimport API from \"../../utils/API\";\n// import LogInSignUp from \"../../components/LogInSignUp\"\n\nclass OneSet extends Component {\n\n  state = {\n   price:10 + \"$\",\n   user:\"\",\n   cart:[],\n   purchased:[]\n\n  }\n\n  componentWillMount() {\n    this.getUser()\n }\n\n\n  getUser = () => {\n    API.fetchUser() \n      .then(res => this.setState({\n        user:res.data,\n        cart:res.data.cart,\n        purchased:res.data.purchased\n      }))\n      .catch(err => console.log(err))\n  };\n\n  downloadSet = () => {\n    // console.log(\"download set clicked\");\n    API.downloadSet(this.props.match.params.id.slice(0, -3))\n    // .then(res=> console.log(res.data))\n    .then(res => window.location.href = res.data)\n    .catch(err => console.log(err))\n  }\n  \ncheckIfPurchased = () => {\n\n  if(this.state.user === \"\"){\n    return <p> you must be signed in to purchase </p>\n  } else {\n    if(this.state.purchased.includes(this.props.match.params.id)){\n      return <button onClick={this.downloadSet} className=\"cart-btn\"> download this set</button>\n\n    } else {\n     return <button onClick={this.addToCart} className=\"cart-btn\"> add to cart </button>\n\n    }\n  }\n}\n\n\n\naddToCart = () => {\n   if (this.state.cart.length === 0) {\n    API.addToCart(this.state.user._id, this.props.match.params.id)\n      .catch(err => console.log(err))\n    // console.log(\"the cart length is zero!\")\n  } else {\n   //console.log(\"cart is longer than zero!\");\n    if (this.state.cart.includes(this.props.match.params.id)) {\n      alert(\"item already in cart\")\n    } else {\n      API.addToCart(this.state.user._id, this.props.match.params.id)\n        .catch(err => console.log(err))\n      // console.log(\"item is not in the cart\");\n    }\n  }\n  API.getUserCart(this.state.user._id)\n  .then(res => this.setState({\n    cart: res.data.cart\n  }));\n}\n    \n    \n   \n\n    render() {\n      //  console.log(\"right before render \" + this.state.user.cart)\n        let jpgName = this.props.match.params.id;\n        let modelName = jpgName.substring(0, jpgName.length - 4);\n        \n        return (\n         <div > \n           <h2 id=\"model-name\">{modelName}</h2>\n           <CoverPhoto fileName={this.props.match.params.id}> </CoverPhoto>\n            <h4>{this.state.price}</h4>\n           {/* <button onClick={this.addToCart} className=\"cart-btn\"> add to cart </button> */}\n           {this.checkIfPurchased()}\n        </div>\n        )\n      }\n    };\n    \n    export default OneSet;"]},"metadata":{},"sourceType":"module"}